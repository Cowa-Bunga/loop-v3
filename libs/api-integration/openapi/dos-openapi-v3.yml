openapi: 3.0.0
info:
  title: cb-dos-api
  version: 1.0.0
servers:
  - url: http://{{base_url}}
  - url: http://{{prod_url}}
  - url: http://{{dev_url}}
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
security:
  - bearerAuth: []
paths:
  /me:
    get:
      tags:
        - default
      summary: get loggedin user info
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /drivers/hub/IWKb2xsLtnAgR2UqqmuN:
    get:
      tags:
        - default
      summary: get drivers - servicing hub
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /drivers/region/xSxl3SeETEQXZRyCjzOU:
    get:
      tags:
        - default
      summary: get drivers - servicing region
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /drivers/oLpggkccIMOw2Cm7LKwI:
    get:
      tags:
        - default
      summary: get driver
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /drivers/HfU5uxdyrlifalIamJNW/acknowledge-sos:
    post:
      tags:
        - default
      summary: acknowledge driver sos
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example: ''
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/U7bGd1ValUgCnk9UaS2C/cancel:
    post:
      tags:
        - default
      summary: cancel order
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example: ''
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/w0fElhy0e6Eu8em7EbaU/reset:
    post:
      tags:
        - default
      summary: reset order
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                trip_id: w0fElhy0e6Eu8em7EbaU
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/y6WFlBd8keZ9YEEyHcsD/returned:
    post:
      tags:
        - default
      summary: driver returned order
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                trip_id: ''
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/L233jwHGtRzRlh64AYqx/cancel/in/trip:
    post:
      tags:
        - default
      summary: cancel order in a trip
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                trip_id: NJoSUjaNG7wYAwhAGfR6
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/create:
    post:
      tags:
        - default
      summary: create order - without parcels
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                branch_id: U5swtfJIMC6FOoe2WpYS
                order:
                  order_no: '0023238'
                  alcohol: true
                  assignable: true
                  customer:
                    name: Tsitsi Marote
                    mobile_no: '+27838935461'
                  address: 21 Junction Ave, Parktown, Johannesburg, 2183
                  location:
                    latitude: -26.042088
                    longitude: 28.016763
                  collection_time: '2019-09-03T14:20:00+02:00'
                  delivery_time: '2019-09-03T15:20:00+02:00'
                  instructions: Call when you have arrived for delivery
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/9THPpCvIfzOOfrzP0RbR/set-order-asignable:
    post:
      tags:
        - default
      summary: set order assignable
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example: ''
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/EF2TrA5Smo8jmr6MhSRS:
    get:
      tags:
        - default
      summary: get order
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/branch/0sBcNNQzHoRDciNv4wqg:
    get:
      tags:
        - default
      summary: get orders
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/active:
    get:
      tags:
        - default
      summary: get active orders
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/abandoned:
    get:
      tags:
        - default
      summary: get abandoned orders
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /orders/y13Peqf1iRJ5qOKURitn/returned:
    post:
      tags:
        - default
      summary: mark order as returned
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                trip_id: HBKTboKJVxX5aFea2v9u
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /trips:
    get:
      tags:
        - default
      summary: get trips
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /trips/create:
    post:
      tags:
        - default
      summary: create trip (fail safe)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                branch_id: 0sBcNNQzHoRDciNv4wqg
                order_ids:
                  - NvHTtYRtI8BrjrUizkvw
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /trips/create-manual:
    post:
      tags:
        - default
      summary: create trip manual (fail safe)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                branch_id: 7uiS9J3Fi2eJQlVcMmnV
                order_ids:
                  - kgeIEvFEf2edfCAQgG6m
                compute_route: true
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /trips/lOz50EBqEkgYNxUsMhVi:
    get:
      tags:
        - default
      summary: get trip
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /trips/zpjbRYHHfescHI3zHrs1/assign-driver:
    post:
      tags:
        - default
      summary: assign driver to trip
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                driver_id: oLpggkccIMOw2Cm7LKwI
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /trips/zpjbRYHHfescHI3zHrs1/remove-driver:
    post:
      tags:
        - default
      summary: remove driver from trip
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                driver_id: oLpggkccIMOw2Cm7LKwI
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /clusters/branch/1g9ckRkuzBl8B6Kmvf4J:
    get:
      tags:
        - default
      summary: get active clusters
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /clusters/fZC9UOnBKkQd9I0zLvhP:
    get:
      tags:
        - default
      summary: get cluster
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
  /clusters/fZC9UOnBKkQd9I0zLvhP/lock-cluster:
    post:
      tags:
        - default
      summary: lock cluster prematurely
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example: ''
      responses:
        '200':
          description: Successful response
          content:
            application/json: {}
